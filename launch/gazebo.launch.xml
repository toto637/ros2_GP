<launch>
    <!-- Define parameters -->
    <arg name="model" default="/home/thomas/ros2_ws/src/my_robot_description/urdf/robot_description.urdf.xacro"/>

    <!-- Set environment variable for Gazebo model path -->
    <env name="GAZEBO_MODEL_PATH" value="$(find my_robot_description)/models:$(ament_prefix_path my_robot_description)/share"/>

    <!-- Launch Gazebo server -->
    <include file="$(find gazebo_ros)/launch/gzserver.launch.py"/>

    <!-- Launch Gazebo client -->
    <include file="$(find gazebo_ros)/launch/gzclient.launch.py"/>

    <!-- Publish robot state -->
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen">
        <param name="robot_description" command="xacro '$(arg model)'"/>
    </node>

    <!-- Spawn robot in Gazebo -->
    <node name="spawn_entity" pkg="gazebo_ros" type="spawn_entity.py" output="screen" args="-entity bumperbot -topic robot_description"/>
</launch>